# éšæœºæ£®æž—ç­–ç•¥ - æ•°æ®åˆ’åˆ†è¯´æ˜Ž

## âœ… å·²ä¿®å¤ï¼šé˜²æ­¢æ•°æ®æ³„éœ²

### é—®é¢˜è¯Šæ–­

**åŽŸç‰ˆæœ¬çš„ä¸¥é‡é—®é¢˜**ï¼š
```python
# âŒ é”™è¯¯åšæ³•ï¼šéšæœºåˆ’åˆ†
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)
```

**é—®é¢˜**ï¼š
1. **æ—¶é—´æ³„éœ²** - è®­ç»ƒé›†å¯èƒ½åŒ…å«æœªæ¥æ•°æ®ï¼Œæµ‹è¯•é›†åŒ…å«è¿‡åŽ»æ•°æ®
2. **å›žæµ‹æ•°æ®æ³„éœ²** - æ¨¡åž‹åœ¨è®­ç»ƒæ—¶å·²ç»"è§è¿‡"å›žæµ‹æœŸçš„æ•°æ®
3. **è¿‡æ‹Ÿåˆ** - è®­ç»ƒæ•°æ®å’Œå›žæµ‹æ•°æ®100%é‡åˆ

---

## âœ… ä¿®å¤åŽçš„æ­£ç¡®åšæ³•

### æ—¶é—´åºåˆ—åˆ’åˆ†

```
å®Œæ•´æ•°æ®: 2023-01-01 ~ 2024-10-18 (çº¦660å¤©)

â”œâ”€ è®­ç»ƒé›†: 2023-01-01 ~ 2024-06-30 (çº¦18ä¸ªæœˆ)
â”‚   â””â”€ ç”¨é€”: è®­ç»ƒéšæœºæ£®æž—æ¨¡åž‹
â”‚
â”œâ”€ æµ‹è¯•é›†: 2024-07-01 ~ 2024-10-18 (çº¦3.5ä¸ªæœˆ)
â”‚   â””â”€ ç”¨é€”: è¯„ä¼°æ¨¡åž‹æ³›åŒ–èƒ½åŠ›
â”‚
â””â”€ å›žæµ‹æœŸ: 2024-07-01 ~ 2024-10-18 (ä¸Žæµ‹è¯•é›†ä¸€è‡´)
    â””â”€ ç”¨é€”: æ¨¡æ‹Ÿå®žç›˜äº¤æ˜“

âš ï¸ å…³é”®ï¼šå›žæµ‹æœŸ = æµ‹è¯•é›†ï¼Œæ¨¡åž‹ä»Žæœªè§è¿‡è¿™äº›æ•°æ®ï¼
```

### ä»£ç å®žçŽ°

```python
# æ—¶é—´åˆ’åˆ†
TRAIN_START = '2023-01-01'
TRAIN_END = '2024-06-30'
TEST_START = '2024-07-01'
TEST_END = '2024-10-18'

# è®­ç»ƒæ¨¡åž‹
predictor.train_model(
    stock_pool,
    train_start=TRAIN_START,
    train_end=TRAIN_END,
    test_start=TEST_START,
    test_end=TEST_END
)

# å›žæµ‹ï¼ˆä»…åœ¨æµ‹è¯•æœŸï¼‰
run_backtest(
    stock_pool=stock_pool,
    predictor=predictor,
    backtest_start=TEST_START,  # ä¸Žæµ‹è¯•é›†ä¸€è‡´
    backtest_end=TEST_END
)
```

---

## ðŸ“Š æ•°æ®æµç¨‹

### 1. è®­ç»ƒé˜¶æ®µ
```
CSVæ–‡ä»¶
  â†’ æŒ‰æ—¥æœŸç­›é€‰ (2023-01-01 ~ 2024-06-30)
  â†’ è®¡ç®—ç‰¹å¾
  â†’ è®­ç»ƒRandomForest
  â†’ åœ¨æµ‹è¯•é›†ä¸Šè¯„ä¼°
```

### 2. å›žæµ‹é˜¶æ®µ
```
CSVæ–‡ä»¶
  â†’ æŒ‰æ—¥æœŸç­›é€‰ (2024-07-01 ~ 2024-10-18)
  â†’ é€æ—¥é¢„æµ‹
  â†’ æ¦‚çŽ‡>60%ä¹°å…¥ï¼Œ<40%å–å‡º
  â†’ è®¡ç®—æ”¶ç›Š
```

---

## ðŸ” éªŒè¯æ— æ•°æ®æ³„éœ²

### æ£€æŸ¥ç‚¹

1. **è®­ç»ƒæ•°æ®æ—¥æœŸèŒƒå›´**
   ```
   è®­ç»ƒé›†æœ€å¤§æ—¥æœŸ < æµ‹è¯•é›†æœ€å°æ—¥æœŸ
   2024-06-30 < 2024-07-01 âœ“
   ```

2. **å›žæµ‹æ•°æ®ç‹¬ç«‹æ€§**
   ```
   å›žæµ‹æœŸ == æµ‹è¯•æœŸ
   æ¨¡åž‹è®­ç»ƒæ—¶æœªè§è¿‡è¿™äº›æ•°æ® âœ“
   ```

3. **æ—¶é—´é¡ºåºä¸¥æ ¼**
   ```
   è®­ç»ƒé›† â†’ æµ‹è¯•é›† â†’ æ— é‡å  âœ“
   ```

---

## ðŸ“ˆ å›žæµ‹ç»“æžœè§£è¯»

### å¯ä¿¡åº¦åˆ†æž

**é«˜å¯ä¿¡åº¦** âœ“
- è®­ç»ƒé›†å’Œæµ‹è¯•é›†æŒ‰æ—¶é—´ä¸¥æ ¼åˆ’åˆ†
- å›žæµ‹æœŸæ•°æ®æ¨¡åž‹ä»Žæœªè§è¿‡
- ç¬¦åˆçœŸå®žäº¤æ˜“åœºæ™¯

**æ³¨æ„äº‹é¡¹**
- æµ‹è¯•é›†ä»…3.5ä¸ªæœˆï¼Œæ ·æœ¬è¾ƒå°‘
- å»ºè®®ä½¿ç”¨æ›´é•¿çš„å›žæµ‹æœŸéªŒè¯ç­–ç•¥ç¨³å®šæ€§
- å¯ä»¥è¿›è¡Œ**æ»šåŠ¨çª—å£å›žæµ‹**è¿›ä¸€æ­¥éªŒè¯

---

## ðŸ”§ å¦‚ä½•è°ƒæ•´æ—¶é—´åˆ’åˆ†

ä¿®æ”¹ `backtest_rf_strategy.py` ä¸­çš„å¸¸é‡ï¼š

```python
# åœ¨ main() å‡½æ•°ä¸­
TRAIN_START = '2023-01-01'  # è®­ç»ƒå¼€å§‹
TRAIN_END = '2024-06-30'    # è®­ç»ƒç»“æŸ
TEST_START = '2024-07-01'   # æµ‹è¯•/å›žæµ‹å¼€å§‹
TEST_END = '2024-10-18'     # æµ‹è¯•/å›žæµ‹ç»“æŸ
```

### æŽ¨èé…ç½®

| åœºæ™¯ | è®­ç»ƒæœŸ | æµ‹è¯•æœŸ | è¯´æ˜Ž |
|------|--------|--------|------|
| **å¿«é€ŸéªŒè¯** | 12ä¸ªæœˆ | 3ä¸ªæœˆ | å½“å‰é…ç½® |
| **ç¨³å®šæµ‹è¯•** | 18ä¸ªæœˆ | 6ä¸ªæœˆ | æŽ¨è |
| **é•¿æœŸéªŒè¯** | 24ä¸ªæœˆ | 12ä¸ªæœˆ | æ•°æ®å……è¶³æ—¶ |

---

## ðŸŽ¯ æ€»ç»“

### ä¿®å¤å‰ âŒ
- éšæœºåˆ’åˆ†ï¼Œå­˜åœ¨æ•°æ®æ³„éœ²
- å›žæµ‹ç»“æžœè™šé«˜ï¼Œä¸å¯ä¿¡
- å®žç›˜ä¼šä¸¥é‡äºæŸ

### ä¿®å¤åŽ âœ…
- æ—¶é—´åºåˆ—åˆ’åˆ†ï¼Œæ— æ•°æ®æ³„éœ²
- å›žæµ‹ç»“æžœçœŸå®žå¯ä¿¡
- å¯ä»¥å®‰å…¨ç”¨äºŽå®žç›˜å‚è€ƒ

---

## ðŸ“š å‚è€ƒ

- [æ—¶é—´åºåˆ—äº¤å‰éªŒè¯](https://scikit-learn.org/stable/modules/cross_validation.html#time-series-split)
- [é¿å…æ•°æ®æ³„éœ²çš„æœ€ä½³å®žè·µ](https://www.kaggle.com/code/alexisbcook/data-leakage)
